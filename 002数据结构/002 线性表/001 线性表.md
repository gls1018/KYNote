## 1. 线性表定义

线性表是具有相同数据类型的$n$个元素的有限序列

- 数据类型相同
- $n$个元素，有限， 不是无限
- 序列，有前后顺序关系



线性表只是一种逻辑结构，不是存储结构。

运算的定义是针对逻辑结构的，运算的具体实现是针对存储结构的



补充:

- 线性表中位序从 $1$ 开始， 下标从 $0$ 开始
- 插入、删除、查找等操作指的是位序，不是下标



## 2. 顺序表



### 2.1定义

静态分配定义

```cpp
#define MaxSize 100
typedef struct
{
    ElemType data[MaxSize];
    int length;
}SqList;
```

动态分配定义

```cpp
#define InitSize 100
typedef struct
{
    ElemType *data;
    int MaxSize, length;
}SqList;

//初始化
SqList L;
L.data = (ElemType*)malloc(sizeof(SqList)*InitSize);
```



顺序表优点

- 可以随机访问
- 存储密度高

顺序表缺点

- 插入和删除需要移动大量元素，插入操作平均需要移动$\frac{n}{2}$个元素
- 顺序存储分配需要一段连续的内存空间



### 2.2 基本操作实现

#### 2.2.1 插入操作

在顺序表的第 $i$ 个位置插入元素 $e$,若 $i$ 的值不合法则返回false。

```cpp
bool ListInsert(SqList &L, int i, Elemtype e)
{
    if(i < 1 || i > L.length+1)
        return false;
    if(L.Length >= MaxSize)
        return false;
    for(int j = L.length -1; j>=i; j--)
    {
        L.data[j] = L.data[j-1]
    }
    L.data[i-1] = e;
    L.length ++;
    return true;
}
```



最好情况: i = L.length + 1; 不用移动元素;时间复杂度 $o(1)$

最差情况: i = 1; 需要移动 $n$ 个元素; 时间复杂度 $o(n)$



平均情况:

假设 $p_i$ 是在第 $i$ 个位置上插入元素的概率，那么
$$
p_i = \frac{1}{n+1}
$$
平均移动的节点次数为
$$
\sum_{i=1}^{n+1} p_i(n+1-i) = p_i * \sum_{i=1}^{n+1}(n-i+1) = \frac{1}{n+1} * \frac{(n+1)*n}{2} = \frac{n}{2}
$$


#### 2.2.2 删除操作

删除顺序表L中第 $i$ 个位置的元素，使用引用变量 $e$ 返回， 若 $i$ 的输入值不合法，返回false



```cpp
bool ListDelete(SqList & L, int i, ElemType & e)
{
    if(i<1 || i>L.length)
        return false;
    e = L.data[i];
    for(int j=i; j<L.length; j++)
        L.data[j-1] = L.data[j];
    L.length --;
    return true;
}
```



最好情况: i=n; 移动元素 0 个

最差情况: i =1; 移动元素 n-1 个

平均情况:

设 $p_i$ 是删除第 $i$ 个元素的概率， 则 $p_i = \frac{1}{n}$; 删除第 $i$ 元素需要移动节点的数量为 $n-i$; 

平均移动节点数量为
$$
\sum_{i=1}^{n}p_i(n-i) = \frac{1}{n}*\frac{n(n-1)}{2} = \frac{n-1}{2}
$$

#### 2.2.3 按值查找

在顺序表中查找第一个值为 $e$ 的元素,返回其位序

```cpp
int LocateElem(SqList L, ElemType e)
{
    int i;
    for(i=0; i<L.length; i++)
    {
        if(L.data[i] == e)
            return i+1
    }
    return 0;
}
```

最好情况: $e$ 在表头; 查找一次

最差情况: $e$ 在表尾；查找 $n$ 次

平均情况：

设 $p_i$ 是查找元素在第 $i$ 个位置上概率, 则 $p_i = \frac{1}{n}$; 需要查找 $i$ 个元素

平均次数为
$$\sum_{i=1}^{n}p_i * i = \frac{1}{n} * \frac{n(n+1)}{2} = \frac{n+1}{2}$$


